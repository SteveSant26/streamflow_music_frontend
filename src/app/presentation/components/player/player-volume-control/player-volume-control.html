<div class="flex items-center gap-3">
  <!-- Volume Icon - Clickable to toggle mute/max -->
  <button 
    (click)="toggleVolume()"
    class="p-1 rounded-full hover:bg-white/10 transition-colors duration-200 cursor-pointer"
    [attr.aria-label]="volume === 0 ? 'Activar sonido' : 'Silenciar'"
  >
    @if (volume === 0) {
      <mat-icon class="w-5 h-5 text-white/70 hover:text-white transition-colors">volume_off</mat-icon>
    } @else if (volume < 0.5) {
      <mat-icon class="w-5 h-5 text-white/70 hover:text-white transition-colors">volume_down</mat-icon>
    } @else {
      <mat-icon class="w-5 h-5 text-white/70 hover:text-white transition-colors">volume_up</mat-icon>
    }
  </button>

  <!-- Volume Slider Container -->
  <div class="relative w-24">
    <div class="w-full h-2 bg-white/20 rounded-full cursor-pointer" (click)="onVolumeBarClick($event)">
      <!-- Volume Fill -->
      <div 
        class="h-full bg-gradient-to-r from-purple-400 to-pink-400 rounded-full transition-all duration-300 ease-out relative"
        [style.width.%]="volumePercentage">
        <!-- Volume Thumb -->
        <div class="absolute right-0 top-1/2 transform -translate-y-1/2 w-3 h-3 bg-white rounded-full shadow-lg border border-purple-400 opacity-0 hover:opacity-100 transition-opacity duration-200"></div>
      </div>
    </div>
    <!-- Hidden range input for accessibility -->
    <input
      type="range"
      min="0"
      max="1"
      step="0.01"
      [value]="volume"
      (input)="onVolumeChange($event)"
      class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
      aria-label="Control de volumen"
    />
  </div>

  <!-- Volume Percentage -->
  <span class="text-white/70 text-xs font-medium min-w-[28px] text-center"> {{ roundedVolumePercentage }}% </span>
</div>
