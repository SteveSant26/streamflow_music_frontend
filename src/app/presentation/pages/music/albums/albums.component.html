<div class="albums-container">
  <!-- Header -->
  <div class="albums-header">
    <h1>{{ 'PAGES.ALBUMS.TITLE' | translate }}</h1>
    <p class="subtitle">{{ 'PAGES.ALBUMS.SUBTITLE' | translate }}</p>
  </div>

  <!-- Filters and Search -->
  <div class="albums-filters">
    <mat-form-field class="search-field">
      <mat-label>{{ 'SEARCH.SEARCH_ALBUMS_ARTISTS' | translate }}</mat-label>
      <input matInput 
             [value]="searchTerm()" 
             (input)="onSearchChange($event.target.value)"
             placeholder="{{ 'SEARCH.ALBUM_PLACEHOLDER' | translate }}">
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>

    <mat-form-field class="sort-field">
      <mat-label>{{ 'SORTING.SORT_BY' | translate }}</mat-label>
      <mat-select [value]="sortBy()" (selectionChange)="onSortChange($event.value)">
        <mat-option value="title">{{ 'SORTING.TITLE_AZ' | translate }}</mat-option>
        <mat-option value="-title">{{ 'SORTING.TITLE_ZA' | translate }}</mat-option>
        <mat-option value="artist__name">{{ 'SORTING.ARTIST_AZ' | translate }}</mat-option>
        <mat-option value="-artist__name">{{ 'SORTING.ARTIST_ZA' | translate }}</mat-option>
        <mat-option value="-release_date">{{ 'SORTING.NEWEST' | translate }}</mat-option>
        <mat-option value="release_date">{{ 'SORTING.OLDEST' | translate }}</mat-option>
        <mat-option value="-play_count">{{ 'SORTING.MOST_POPULAR' | translate }}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="loading()">
    <mat-spinner diameter="50"></mat-spinner>
    <p>{{ 'COMMON.LOADING_ALBUMS' | translate }}</p>
  </div>

  <!-- Error State -->
  <div class="error-container" *ngIf="error() && !loading()">
    <mat-icon class="error-icon">error</mat-icon>
    <p>{{ error() }}</p>
    <button mat-raised-button color="primary" (click)="loadAlbums()">
      {{ 'COMMON.RETRY' | translate }}
    </button>
  </div>

  <!-- Albums Grid -->
  <div class="albums-grid" *ngIf="!loading() && !error() && filteredAlbums().length > 0">
    <mat-card *ngFor="let album of filteredAlbums()" class="album-card">
      <div class="album-image-container">
        <img mat-card-image 
             [src]="album.cover_url || '/assets/default-album.png'" 
             [alt]="album.title" 
             class="album-cover">
        <div class="album-overlay">
          <button mat-fab 
                  color="primary" 
                  [routerLink]="getAlbumLink(album.id)"
                  matTooltip="Ver álbum">
            <mat-icon>play_arrow</mat-icon>
          </button>
        </div>
      </div>
      
      <mat-card-content>
        <h3 class="album-title">{{ album.title }}</h3>
        <p class="artist-name">{{ album.artist_name }}</p>
        <div class="album-info">
          <span class="track-count">{{ album.total_tracks }} canciones</span>
          <span *ngIf="album.release_date" class="release-date">
            {{ album.release_date | date:'yyyy' }}
          </span>
        </div>
      </mat-card-content>
      
      <mat-card-actions>
        <button mat-button 
                [routerLink]="getAlbumLink(album.id)" 
                color="primary">
          <mat-icon>album</mat-icon>
          Ver Álbum
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!loading() && !error() && filteredAlbums().length === 0">
    <mat-icon class="empty-icon">library_music</mat-icon>
    <h2>{{ 'COMMON.NO_ALBUMS_FOUND' | translate }}</h2>
    <p *ngIf="searchTerm()">
      No hay álbumes que coincidan con "{{ searchTerm() }}". 
      Intenta con otros términos de búsqueda.
    </p>
    <p *ngIf="!searchTerm()">
      Aún no hay álbumes disponibles en la biblioteca.
    </p>
  </div>
</div>
