<div class="min-h-screen bg-background text-on-background p-6" appTheme>
  <!-- Header Section -->
  <div class="max-w-7xl mx-auto mb-16">
    <div class="text-center mb-12">
      <h1 class="text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
        {{ 'SUBSCRIPTION.HEADER.TITLE' | translate }}
      </h1>
      <p class="text-xl text-on-surface/70 max-w-3xl mx-auto">
        {{ 'SUBSCRIPTION.HEADER.DESCRIPTION' | translate }}
      </p>
    </div>
  </div>

  <!-- Fixed Plans Grid -->
  <div class="max-w-7xl mx-auto">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12">
      
      <!-- FREE PLAN -->
      <div class="group relative card-float">
        <div class="absolute inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-3xl transform rotate-1 transition-transform group-hover:rotate-2 card-stack"></div>
        <mat-card class="relative bg-surface border-2 border-outline-variant rounded-3xl overflow-hidden transition-all duration-500 hover:shadow-2xl hover:-translate-y-2 hover:border-primary">
          <mat-card-content class="p-0">
            <!-- Plan Header with Gradient -->
            <div class="bg-gradient-to-br from-gray-50 to-gray-100 animated-gradient p-8 text-center relative overflow-hidden">
              <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-200/20 to-transparent rounded-full -translate-y-16 translate-x-16"></div>
              
              <div class="relative z-10">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-gray-400 to-gray-600 rounded-2xl mb-4 shadow-lg group-hover:scale-110 transition-transform duration-300">
                  <mat-icon class="text-2xl text-white">music_note</mat-icon>
                </div>
                
                <h3 class="text-2xl font-bold text-gray-900 mb-2">{{ 'SUBSCRIPTION.FREE_PLAN.NAME' | translate }}</h3>
                
                <div class="mb-4">
                  <span class="text-5xl font-bold text-gray-900">€0</span>
                  <span class="text-lg text-gray-500 ml-1">/mes</span>
                </div>
                
                <p class="text-sm text-gray-600 max-w-xs mx-auto">
                  Perfecto para empezar tu viaje musical
                </p>
              </div>
            </div>

            <!-- Features List -->
            <div class="p-8">
              <div class="space-y-4 mb-8">
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-green-600">check</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Acceso limitado a la biblioteca</span>
                </div>
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-yellow-600">ads_click</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Anuncios entre canciones</span>
                </div>
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-blue-600">headphones</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Calidad de audio estándar</span>
                </div>
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-red-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-red-600">cloud_off</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Sin descargas offline</span>
                </div>
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-">speaker</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Reproductor básico</span>
                </div>
              </div>

              <!-- Action Button -->
              <button 
                mat-flat-button 
                class="w-full bg-gradient-to-r from-gray-200 to-gray-300 text-gray-800 font-semibold py-4 rounded-2xl transition-all duration-300 hover:from-gray-300 hover:to-gray-400 hover:shadow-lg transform hover:scale-105"
                (click)="selectPlan('free')">
                <span class="flex items-center justify-center gap-2">
                  Comenzar Gratis
                  <mat-icon class="text-lg">arrow_forward</mat-icon>
                </span>
              </button>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

      <!-- PREMIUM MONTHLY PLAN -->
      <div class="group relative card-float">
        <div class="absolute inset-0 bg-gradient-to-br from-blue-50 to-purple-100 rounded-3xl transform -rotate-1 transition-transform group-hover:-rotate-2 card-stack"></div>
        <mat-card class="relative bg-surface border-2 border-outline-variant rounded-3xl overflow-hidden transition-all duration-500 hover:shadow-2xl hover:-translate-y-2 hover:border-primary card-glow">
          <mat-card-content class="p-0">
            <!-- Plan Header with Gradient -->
            <div class="bg-black animated-gradient p-8 text-center relative overflow-hidden">
              <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/20 to-transparent rounded-full -translate-y-16 translate-x-16"></div>
              <div class="absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-white/10 to-transparent rounded-full translate-y-12 -translate-x-12"></div>
              
              <div class="relative z-10">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl mb-4 shadow-lg group-hover:scale-110 transition-transform duration-300">
                  <mat-icon class="text-2xl text-white">star</mat-icon>
                </div>
                
                <h3 class="text-2xl font-bold text-white mb-2">{{ 'SUBSCRIPTION.MONTHLY_PLAN.NAME' | translate }}</h3>
                
                <div class="mb-4">
                  <span class="text-5xl font-bold text-white">€9</span>
                  <span class="text-lg text-blue-100 ml-1">/mes</span>
                </div>
                
                <p class="text-sm text-blue-100 max-w-xs mx-auto">
                  La experiencia premium completa
                </p>
              </div>
            </div>

            <!-- Features List -->
            <div class="p-8">
              <div class="space-y-4 mb-8">
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-green-600">check</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Acceso completo a toda la música</span>
                </div>
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-green-600">block</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Sin anuncios</span>
                </div>
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-green-600">high_quality</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Audio de alta calidad</span>
                </div>
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-green-600">download</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Descargas offline ilimitadas</span>
                </div>
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-green-600">playlist_play</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Playlists personalizadas</span>
                </div>
              </div>

              <!-- Action Button -->
              <button 
                mat-flat-button 
                class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold py-4 rounded-2xl transition-all duration-300 hover:from-blue-600 hover:to-purple-700 hover:shadow-lg transform hover:scale-105 shimmer-effect relative overflow-hidden"
                (click)="selectPlan('premium-monthly')">
                <span class="relative flex items-center justify-center gap-2">
                  Comenzar Ahora
                  <mat-icon class="text-lg">star</mat-icon>
                </span>
              </button>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

      <!-- PREMIUM YEARLY PLAN -->
      <div class="group relative card-float">
        <!-- Popular Badge -->
        <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 z-20">
          <div class="bg-gradient-to-r from-amber-400 to-orange-500 text-white px-6 py-2 rounded-full text-sm font-bold shadow-lg popular-badge">
            <div class="flex items-center gap-2">
              <mat-icon class="text-sm">trending_up</mat-icon>
              Más Popular
            </div>
          </div>
        </div>
        
        <div class="absolute inset-0 bg-gradient-to-br from-amber-50 to-orange-100 rounded-3xl transform rotate-1 transition-transform group-hover:rotate-2 card-stack"></div>
        <mat-card class="relative bg-surface border-2 border-primary rounded-3xl overflow-hidden transition-all duration-500 hover:shadow-2xl hover:-translate-y-2 hover:border-amber-400 card-glow">
          <mat-card-content class="p-0">
            <!-- Plan Header with Gradient -->
            <div class="bg-gradient-to-br from-amber-400 via-orange-500 to-red-500 animated-gradient p-8 text-center relative overflow-hidden">
              <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/20 to-transparent rounded-full -translate-y-16 translate-x-16"></div>
              <div class="absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-white/10 to-transparent rounded-full translate-y-12 -translate-x-12"></div>
              
              <div class="relative z-10 pt-4">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl mb-4 shadow-lg group-hover:scale-110 transition-transform duration-300">
                  <mat-icon class="text-2xl text-white">diamond</mat-icon>
                </div>
                
                <h3 class="text-2xl font-bold text-white mb-2">{{ 'SUBSCRIPTION.YEARLY_PLAN.NAME' | translate }}</h3>
                
                <div class="mb-2">
                  <div class="flex items-center justify-center gap-2 mb-1">
                    <span class="text-lg text-orange-100 line-through">€108</span>
                    <span class="bg-white/20 text-white px-2 py-1 rounded-lg text-xs font-bold shimmer-effect">
                      Ahorra 33%
                    </span>
                  </div>
                  <span class="text-5xl font-bold text-white">€72</span>
                  <span class="text-lg text-orange-100 ml-1">/año</span>
                </div>
                
                <p class="text-sm text-orange-100 max-w-xs mx-auto">
                  El mejor valor para usuarios frecuentes
                </p>
              </div>
            </div>

            <!-- Features List -->
            <div class="p-8">
              <div class="space-y-4 mb-8">
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-green-600">check</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface font-medium">Todo lo de Premium Mensual</span>
                </div>
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-amber-600">savings</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Ahorra €36 al año</span>
                </div>
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-purple-600">music_video</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Acceso anticipado a nuevas funciones</span>
                </div>
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-blue-600">support_agent</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Soporte prioritario</span>
                </div>
                <div class="flex items-center gap-3 feature-icon">
                  <div class="flex-shrink-0 w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center">
                    <mat-icon class="text-sm text-emerald-600">workspace_premium</mat-icon>
                  </div>
                  <span class="text-sm text-on-surface">Funciones exclusivas</span>
                </div>
              </div>

              <!-- Action Button -->
              <button 
                mat-flat-button 
                class="w-full bg-gradient-to-r from-amber-400 to-orange-500 text-white font-semibold py-4 rounded-2xl transition-all duration-300 hover:from-amber-500 hover:to-orange-600 hover:shadow-lg transform hover:scale-105 relative overflow-hidden shimmer-effect"
                (click)="selectPlan('premium-yearly')">
                <div class="absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"></div>
                <span class="relative flex items-center justify-center gap-2">
                  ¡Obtener Mejor Valor!
                  <mat-icon class="text-lg">diamond</mat-icon>
                </span>
              </button>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

    </div>
  </div>

  <!-- Trust Indicators -->
  <div class="max-w-4xl mx-auto mt-16 text-center">
    <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
      <div class="flex flex-col items-center gap-2">
        <mat-icon class="text-3xl text-gray-600">security</mat-icon>
        <span class="text-sm text-gray-600">{{ 'SUBSCRIPTION.TRUST_INDICATORS.SECURE_PAYMENT' | translate }}</span>
      </div>
      <div class="flex flex-col items-center gap-2">
        <mat-icon class="text-3xl text-gray-600">cancel</mat-icon>
        <span class="text-sm text-gray-600">{{ 'SUBSCRIPTION.TRUST_INDICATORS.CANCEL_ANYTIME' | translate }}</span>
      </div>
      <div class="flex flex-col items-center gap-2">
        <mat-icon class="text-3xl text-gray-600">support</mat-icon>
        <span class="text-sm text-gray-600">{{ 'SUBSCRIPTION.TRUST_INDICATORS.SUPPORT' | translate }}</span>
      </div>
      <div class="flex flex-col items-center gap-2">
        <mat-icon class="text-3xl text-gray-600">high_quality</mat-icon>
        <span class="text-sm text-gray-600">{{ 'SUBSCRIPTION.TRUST_INDICATORS.PREMIUM_QUALITY' | translate }}</span>
      </div>
    </div>
  </div>

  <!-- Loading overlay -->
  <div *ngIf="loading()" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg p-8 text-center">
      <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-black mx-auto mb-4"></div>
      <p class="text-gray-700">{{ 'SUBSCRIPTION.LOADING' | translate }}</p>
    </div>
  </div>
</div>
