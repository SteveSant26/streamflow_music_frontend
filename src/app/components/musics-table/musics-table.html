<!-- Mobile view - Card layout -->
<div class="block sm:hidden space-y-3">
  @for (song of songs; track song.id; let i = $index) {
    <div
      class="bg-elevated rounded-lg p-3 hover-bg-elevated-hover transition duration-300 group"
    >
      <div class="flex items-center gap-3">
        <!-- Play button / Number -->
        <div class="relative w-8 flex justify-center">
          <span
            class="opacity-100 transition-all group-hover:opacity-0 text-subdued text-sm"
          >
            {{ i + 1 }}
          </span>
          <div
            class="absolute top-0 opacity-0 transition-all group-hover:opacity-100"
          >
            <app-musics-table-play
              [song]="song"
              [isCurrentSong]="isCurrentSong(song)"
            >
            </app-musics-table-play>
          </div>
        </div>

        <!-- Song info -->
        <div class="flex items-center gap-3 flex-1 min-w-0">
          <picture>
            <img
              [src]="song.albumCover"
              [alt]="song.title"
              class="w-10 h-10 rounded"
              onerror="this.src='/assets/default-album.jpg'"
            />
          </picture>
          <div class="flex flex-col min-w-0 flex-1">
            <button
              [class]="
                'text-sm font-normal truncate hover:underline text-left bg-transparent border-none p-0 ' +
                (isCurrentSong(song) ? 'text-accent' : 'text-base')
              "
              (click)="goToSongDescription(song.id)"
            >
              {{ song.title }}
            </button>
            <span class="text-subdued text-xs truncate">{{ song.artist }}</span>
          </div>
        </div>

        <!-- Duration -->
        <span class="text-subdued text-xs">{{ formatPlayCount(song.plays) }}</span>
      </div>
    </div>
  }
</div>

<!-- Desktop view - Table layout -->
<table
  class="hidden sm:table table-auto text-left min-w-full divide-y divide-border"
>
  <thead>
    <tr class="text-subdued text-sm">
      <th class="px-4 py-2 font-bold">#</th>
      <th class="px-4 py-2 font-bold">{{ "TABLE.TITLE" | translate }}</th>
      <th class="px-4 py-2 font-bold hidden md:table-cell">
        {{ "TABLE.ALBUM" | translate }}
      </th>
      <th class="px-4 py-2 font-bold">
        <mat-icon>schedule</mat-icon>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr class="h-4"></tr>
    @for (song of songs; track song.id; let i = $index) {
      <tr
        class="text-base border-spacing-0 font-bold hover-bg-elevated-hover overflow-hidden transition duration-300 group"
      >
        <td class="relative px-4 py-2 rounded-tl-lg rounded-bl-lg w-5">
          <span
            class="absolute top-5 opacity-100 transition-all group-hover:opacity-0"
          >
            {{ i + 1 }}
          </span>
          <div
            class="absolute top-5 opacity-0 transition-all group-hover:opacity-100"
          >
            <app-musics-table-play
              [song]="song"
              [isCurrentSong]="isCurrentSong(song)"
            >
            </app-musics-table-play>
          </div>
        </td>
        <td class="px-4 py-2 flex gap-3">
          <picture>
            <img
              [src]="song.albumCover"
              [alt]="song.title"
              class="w-11 h-11 rounded"
              onerror="this.src='/assets/default-album.jpg'"
            />
          </picture>
          <div class="flex flex-col">
            <button
              [class]="
                'text-base font-normal hover:underline text-left bg-transparent border-none p-0 ' +
                (isCurrentSong(song) ? 'text-accent' : 'text-base')
              "
              (click)="goToSongDescription(song.id)"
            >
              {{ song.title }}
            </button>
            <span class="text-subdued">{{ song.artist }}</span>
          </div>
        </td>
        <td class="px-4 py-2 hidden md:table-cell">{{ song.album }}</td>
        <td class="px-4 py-2 rounded-tr-lg rounded-br-lg">
          {{ formatPlayCount(song.plays) }} reproducciones
        </td>
      </tr>
    }
  </tbody>
</table>
